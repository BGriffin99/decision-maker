<!DOCTYPE html>
<html lang="en">

<head>
  <title>Result Poll Page</title>

  <meta charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <meta name="viewport" content="width=device-width, initial-scale=1.0" >

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" />
  <link rel="stylesheet" href="/vendor/border-box.css" />
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="stylesheet" href="/styles/layout.css" />
  <link rel="stylesheet" href="/styles/show-poll.css" />
  <link rel="stylesheet" href="/styles/result-poll.css" />
  <link rel="stylesheet" href="/styles/media.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Amaranth:wght@400;700&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>


  <!-- Bootstrap CSS -->
  <link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
  crossorigin="anonymous"/>


  <script src="/vendor/jquery-3.0.0.js"></script>
  <script defer src="/scripts/app.js"></script>
</head>

<body>
  <header>
    <img src = "/images/arrows.png" alt="Arrows picture"/>
    <div id ="logo">Decision Maker</div>
  </header>
    <main class="container">
      <section class="vote-section">
        <form class="vote-form">
  <!-- Vote question -->
          <div class="vote-question">
            <h1><%= title %></h1>
            <p>The voting result is shown in the chart</p>
          </div>
  <!-- Vote result -->
          <div class="result-vote">
            <canvas id="myChart"></canvas>
            <script>
              let xValues = [];
              <% poll.forEach(function(item) { %>
                xValues.push('<%= item.choice_title %>');
              <% }) %>
              let yValues = [8, 6, 3, 2];
              let barColors = ["red", "green","blue","orange","brown"];
              new Chart("myChart", {
                type: "horizontalBar",
                data: {
                  labels: xValues,
                  datasets: [{
                    backgroundColor: barColors,
                    data: yValues
                  }]
                },
                options: {
                  legend: {display: false},
                }
              });
            </script>
          </div>
        </form>
      </section>
    </main>

<!-- Bootstrap CSS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
  crossorigin="anonymous"></script>
</body>
</html>
